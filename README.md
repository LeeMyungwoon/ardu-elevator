# 아두이노 엘리베이터 시뮬레이션 🚀

이 프로젝트는 **아두이노(Arduino)를 이용한 엘리베이터 제어 시스템**을 구현한 것입니다. 버튼을 눌러 층을 호출하고, 호출을 취소하며, LED를 이용하여 현재 엘리베이터의 위치 및 호출 상태를 시각적으로 표시합니다.

---

## 기능리스트

### **1. 호출 기능**
- 각 층의 엘리베이터 호출 버튼을 누르면 엘리베이터가 해당층으로 이동한다
- 각 층의 엘리베이터 호출 버튼은 동시에 누를 수 있다


### **2. 호출 취소 기능**
- 호출 이후 한번 더 호출버튼을 누르면 호출이 취소된다
	

### **3. 호출상태 표시 기능**
- 각 층의 엘리베이터 호출 버튼을 누르면 호출상태 LED도 켜진다
- 엘리베이터가 도착하거나 호출이 취소되면 호출상태 LED도 꺼진다
	

### **4. 엘리베이터 이동 기능**
- 엘리베이터는 1층에서 시작한다
- 대기 중 다른 호출이 발생하면 해당 층으로 이동한다
- 이동 중 다른 호출이 발생하면 다음의 규칙을 따른다
 - 먼저 호출된 층으로 가는길에 있는 경우, 경유지로 설정하고 이동
 - 먼저 호출된 층으로 가는 길에 없는 경우, 최종 목적지로 설정하고 이동
- 호출이 없는 경우 현재 층에서 대기한다
- 엘리베이터는 각 층 사이에 대기할 수 없다
- 동시에 버튼이 눌릴경우 현재 엘리베이터에서 가장 가까운 버튼으로 먼저 이동한다
- 엘리베이터 이동 중 호출이 멈추면 현재 엘리베이터 위치에 가장 가까운곳에 엘리베이터가 정지한다


### **5. 엘리베이터 위치 표시 기능**
- 엘리베이터의 현재 위치에 해당하는 LED는 켜진다
- 엘리베이터가 이동한 뒤, 이전 LED는 꺼진다
- 엘리베이터의 이동속도는 1칸 당 (이동 칸) 2초다 


---

## 📌 기능 소개

### ✅ 호출 기능
- 각 층의 버튼을 누르면 엘리베이터가 해당 층으로 이동합니다.

### ✅ 호출 취소 기능
- 버튼을 다시 누르면 해당 층에 대한 호출이 취소됩니다.

### ✅ 호출 상태 표시 (LED 사용)
- 버튼을 누르면 해당 층의 **USER LED**가 켜집니다.
- 엘리베이터가 도착하거나 호출이 취소되면 **USER LED**가 꺼집니다.

### ✅ 엘리베이터 이동
- 기본적으로 **1층에서 시작**합니다.
- 큐(Queue)를 사용하여 호출된 순서대로 엘리베이터를 이동시킵니다.
- 이동 중 호출이 취소되면 현재 이동방향에 있는 층 중 가장 가까운 층에서 멈춥니다. 
- 이동 중 새로운 호출이 들어오면 우선순위에 따라 도착 순서를 결정합니다.

### ✅ 엘리베이터 위치 표시
- **STATE LED(7개)**를 사용하여 엘리베이터의 현재 위치를 표시합니다.
- 1층, 2층, 3층은 각각 `STATE_LEDS[0], STATE_LEDS[3], STATE_LEDS[6]`에 해당합니다.
- 이동 중에는 중간 LED가 점등됩니다.

---

## 🛠 하드웨어 구성

| 컴포넌트 | 핀 연결 |
|----------|--------|
| **아두이노 보드** | Uno, Mega 등 |
| **버튼 (3개)** | 11 (1층), 12 (2층), 13 (3층) |
| **USER LED (3개)** | 8 (1층), 9 (2층), 10 (3층) |
| **STATE LED (7개)** | A0, 2, 3, 4, 5, 6, 7 |

---

## 🔧 코드 개요

### **1. setup()**
- 시리얼 통신 초기화 (`Serial.begin(9600);`)
- 버튼 및 LED 핀 설정 (`pinMode` 설정)
- 엘리베이터 초기 위치(1층) 설정 (`current_floor = 0`)
- 호출 상태 (`visited[]`) 초기화

### **2. checkButtonPress()**
- 버튼 입력을 감지하고, **디바운스 처리**(DELAY) 후 큐에 호출을 추가
- 버튼이 다시 눌리면 해당 층의 호출을 **취소**
- USER LED를 이용하여 호출 상태를 표시

### **3. processElevatorMovement()**
- 큐에 요청된 층으로 이동
- 이동 중에도 새로운 호출을 처리
- 이동 중 호출이 취소되면 가장 가까운 층에서 정지
- 도착 후 호출 LED를 끄고 `visited[]` 배열을 초기화

---

## 🚀 설치 및 실행 방법

### 1️⃣ GitHub에서 클론 받기
```bash
git clone https://github.com/your-username/arduino-elevator-simulation.git
```

### 2️⃣ 아두이노 IDE에서 열기
- `.ino` 파일을 아두이노 IDE에서 엽니다.
- 사용 중인 아두이노 보드와 핀 구성을 확인합니다.

### 3️⃣ 코드 업로드
- 아두이노를 PC에 연결합니다.
- 코드를 업로드합니다.

### 4️⃣ 테스트
- 각 층 버튼을 눌러 엘리베이터가 정상적으로 이동하는지 확인합니다.
- 호출 취소 기능이 올바르게 작동하는지 테스트합니다.

---

## 🧪 테스트 케이스

| 테스트 케이스 | 입력 | 예상 동작 |
|--------------|------|----------|
| **단일 호출** | 2층 버튼 | 엘리베이터가 2층으로 이동 후 정지 |
| **호출 취소** | 3층 버튼 → 3층 버튼 | 호출이 취소되고 엘리베이터 이동 안 함 |
| **연속 호출1** | 2층 버튼 → 3층 버튼 | 2층 도착 후 3층으로 이동 |
| **연속 호출2** | 3층 버튼 → 2층 버튼 | 2층 도착 후 3층으로 이동 |
| **디바운스 테스트** | 2층 버튼을 빠르게 여러 번 누름 | 한 번만 호출됨 |
| **이동 중 취소** | 3층 호출 후 이동 중 3층 호출 취소 | 가장 가까운 위치에서 정지 |


---

## 🤝 기여 방법

이 프로젝트는 오픈 소스입니다! 개선 사항이나 버그 수정이 있다면 PR(Pull Request)를 보내주세요. 이슈가 있다면 **GitHub Issue**에 등록해 주세요.

```bash
git checkout -b feature/new-feature
git commit -m "Add new feature"
git push origin feature/new-feature
```

---

## 📜 라이선스

이 프로젝트는 **MIT 라이선스** 하에 배포됩니다.

---

## 📢 문의

- GitHub Issue를 이용해 주세요.
- 또는 이메일: **knulpmyung@gmail.com**


